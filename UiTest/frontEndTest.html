<!DOCTYPE html>
<html>
<body>

<!--<input type="file" id="files" name="files[]" multiple />-->
<input type="file" id="files" />
<output id="list"></output>


<input type="file" id="fileUpload" />
<textarea rows="10" cols="150" id="inputtedCsvTxt">
</textarea>
<input type="button" id="upload" value="Upload" onclick="Upload()" />
<hr />
<div id="dvCSV">
</div>

<script>
//  function handleFileSelect(evt) {
//    var files = evt.target.files; // FileList object
//
//    // files is a FileList of File objects. List some properties.
//    var output = [];
//    for (var i = 0, f; f = files[i]; i++) {
//      output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
//                  f.size, ' bytes, last modified: ',
//                  f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
//                  '</li>');
//    }
//    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
//  }

function handleFileSelect(evt) {
    var files = evt.target.file; // FileList object
    var inputtedCsvTxt = document.getElementById('inputtedCsvTxt');
    inputtedCsvTxt.value = files.read();
    // files is a FileList of File objects. List some properties.
//    var output = [];
//    for (var i = 0, f; f = files[i]; i++) {
//        output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
//            f.size, ' bytes, last modified: ',
//            f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
//            '</li>');
//    }
//    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
}
  document.getElementById('files').addEventListener('change', handleFileSelect, false);

var separators = [' ', ','];


  function Upload() {
      var fileUpload = document.getElementById("fileUpload");
      var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.csv|.txt)$/;
      if (regex.test(fileUpload.value.toLowerCase())) {
          if (typeof (FileReader) != "undefined") {
              var reader = new FileReader();
              reader.onload = function (e) {
                  var table = document.createElement("table");
                  var rows = e.target.result.split("\n");
                  for (var i = 0; i < rows.length; i++) {
                      var cells = rows[i].split(new RegExp(separators.join('|'), 'g'));

                      if (cells.length > 1) {
                          var row = table.insertRow(-1);
                          for (var j = 0; j < cells.length; j++) {
                              var cell = row.insertCell(-1);
                              cell.innerHTML = cells[j];
                          }
                      }
                  }

                  var inputtedCsvTxt = document.getElementById('inputtedCsvTxt');


                  inputtedCsvTxt.value =e.target.result;

                  var dvCSV = document.getElementById("dvCSV");
                  dvCSV.innerHTML = "";
                  dvCSV.appendChild(table);
              }
              reader.readAsText(fileUpload.files[0]);
          } else {
              alert("This browser does not support HTML5.");
          }
      } else {
          alert("Please upload a valid CSV file.");
      }
  }
</script>

</body>
</html>